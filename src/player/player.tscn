[gd_scene load_steps=18 format=3 uid="uid://j1px6ey07p2f"]

[ext_resource type="Script" uid="uid://ds6cq7tyxjvrc" path="res://src/player/player.gd" id="1_4anbu"]
[ext_resource type="Script" uid="uid://bocfext65sbpj" path="res://src/player/camera.gd" id="2_244u8"]
[ext_resource type="Script" uid="uid://dys3s0o8myw2e" path="res://src/player/weapon/weapon_handler.gd" id="2_rxibo"]
[ext_resource type="Theme" uid="uid://3as6f5nxctip" path="res://src/main_theme.tres" id="5_2smqc"]
[ext_resource type="Texture2D" uid="uid://ddwv6d1j2fuuq" path="res://src/textures/bronze_medal.png" id="5_5f2sf"]
[ext_resource type="StyleBox" uid="uid://qusrl8wrgfa0" path="res://src/panel_style.tres" id="5_cwolq"]
[ext_resource type="Script" uid="uid://benori4j4wu38" path="res://src/player/leaderboard.gd" id="5_l271a"]
[ext_resource type="PackedScene" uid="uid://dgyf0q5uvvtna" path="res://src/player/arms.glb" id="5_wlj80"]
[ext_resource type="Texture2D" uid="uid://bbyo6tb1eqrns" path="res://src/textures/silver_medal.png" id="6_x42xx"]
[ext_resource type="Texture2D" uid="uid://bo4kloegfbey2" path="res://src/textures/gold_medal.png" id="7_l271a"]
[ext_resource type="Texture2D" uid="uid://doueeo1np6if1" path="res://src/textures/author_medal.png" id="8_8ydov"]
[ext_resource type="Texture2D" uid="uid://dqvbiit5bj0rm" path="res://src/textures/plat_medal.png" id="9_8ydov"]
[ext_resource type="Texture2D" uid="uid://cncfrlllaohv5" path="res://src/textures/sniper_overlay.png" id="11_ylhto"]
[ext_resource type="FontFile" uid="uid://reim7hyo6sqy" path="res://src/fonts/OpenSans-Regular.ttf" id="14_rl62b"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_5f2sf"]
radius = 0.25
height = 2.1

[sub_resource type="Theme" id="Theme_ylhto"]
default_font_size = 15

[sub_resource type="Theme" id="Theme_wlj80"]
default_font = ExtResource("14_rl62b")

[node name="Player" type="CharacterBody3D"]
collision_layer = 2
script = ExtResource("1_4anbu")

[node name="Eye" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.85, 0)
top_level = true

[node name="Camera" type="Camera3D" parent="Eye"]
cull_mask = 1
script = ExtResource("2_244u8")

[node name="WeaponHandler" type="Node3D" parent="Eye/Camera"]
physics_interpolation_mode = 2
script = ExtResource("2_rxibo")
sway_left = Vector3(-0.1, 0, 0)
sway_right = Vector3(0.1, 0, 0)
sway_left_rot = Vector3(0, 0, 0.2)
sway_right_rot = Vector3(0, 0, -0.2)
sway_forward = Vector3(0, 0, -0.1)
sway_backward = Vector3(0, 0, 0.1)
sway_vertical = Vector3(0, 0.03, 0)

[node name="AudioPlayer" type="AudioStreamPlayer3D" parent="Eye/Camera/WeaponHandler"]

[node name="GunContainer" type="Node3D" parent="Eye/Camera/WeaponHandler"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.347699, -0.392556, -0.757384)

[node name="Arms" parent="Eye/Camera/WeaponHandler" instance=ExtResource("5_wlj80")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.052727, -1.66623, 0.188619)

[node name="arms" parent="Eye/Camera/WeaponHandler/Arms/Armature/Skeleton3D" index="0"]
layers = 2

[node name="RHandIk" type="SkeletonIK3D" parent="Eye/Camera/WeaponHandler/Arms/Armature/Skeleton3D" index="1"]
root_bone = &"upperarm.r"
tip_bone = &"hand.r"

[node name="LHandIk" type="SkeletonIK3D" parent="Eye/Camera/WeaponHandler/Arms/Armature/Skeleton3D" index="2"]
root_bone = &"upperarm.l"
tip_bone = &"hand.l"

[node name="GunVPContainer" type="SubViewportContainer" parent="Eye/Camera"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="GunVP" type="SubViewport" parent="Eye/Camera/GunVPContainer"]
transparent_bg = true
handle_input_locally = false
size = Vector2i(1920, 1080)
render_target_update_mode = 4

[node name="GunCam" type="Camera3D" parent="Eye/Camera/GunVPContainer/GunVP"]
physics_interpolation_mode = 2
top_level = true
cull_mask = 2
fov = 90.0
near = 0.2

[node name="Collider" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
shape = SubResource("CapsuleShape3D_5f2sf")

[node name="UI" type="CanvasLayer" parent="."]

[node name="UiContainer" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("5_2smqc")

[node name="Middle" type="Control" parent="UI/UiContainer"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Speed" type="Label" parent="UI/UiContainer/Middle"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -60.0
offset_top = 5.0
offset_right = 60.0
offset_bottom = 28.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 15
text = "59.98 u/s"
horizontal_alignment = 1
vertical_alignment = 1

[node name="PreStrafeSpeed" type="Label" parent="UI/UiContainer/Middle"]
visible = false
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -60.0
offset_top = 20.0
offset_right = 60.0
offset_bottom = 43.0
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_color = Color(0, 1, 0, 1)
theme_override_font_sizes/font_size = 15
text = "59.98 u/s"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Crosshair" type="Control" parent="UI/UiContainer/Middle"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.5, 0.5)

[node name="ColorRect" type="ColorRect" parent="UI/UiContainer/Middle/Crosshair"]
layout_mode = 0
offset_left = -2.0
offset_top = -8.0
offset_right = 2.0
offset_bottom = 8.0

[node name="ColorRect2" type="ColorRect" parent="UI/UiContainer/Middle/Crosshair"]
layout_mode = 0
offset_left = -8.0
offset_top = -2.0
offset_right = 8.0
offset_bottom = 2.0

[node name="TopLeft" type="Panel" parent="UI/UiContainer"]
custom_minimum_size = Vector2(120, 30)
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -120.0
offset_top = -30.0
grow_horizontal = 0
grow_vertical = 0
theme_override_styles/panel = ExtResource("5_cwolq")

[node name="Fps" type="Label" parent="UI/UiContainer/TopLeft"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 17
text = "60 fps"
horizontal_alignment = 1
vertical_alignment = 1

[node name="BottomLeft" type="Panel" parent="UI/UiContainer"]
custom_minimum_size = Vector2(120, 80)
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -80.0
offset_right = 120.0
grow_vertical = 0
theme_override_styles/panel = ExtResource("5_cwolq")

[node name="V" type="VBoxContainer" parent="UI/UiContainer/BottomLeft"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="EnemiesLeft" type="Label" parent="UI/UiContainer/BottomLeft/V"]
layout_mode = 2
theme_override_font_sizes/font_size = 17
text = "Targets: 0/0"
horizontal_alignment = 1

[node name="Timer" type="Label" parent="UI/UiContainer/BottomLeft/V"]
layout_mode = 2
theme_override_font_sizes/font_size = 17
text = "Time: 0.00"
horizontal_alignment = 1

[node name="Speed" type="Label" parent="UI/UiContainer/BottomLeft/V"]
layout_mode = 2
theme_override_font_sizes/font_size = 17
text = "59.98 u/s"
horizontal_alignment = 1

[node name="SniperOverlay" type="TextureRect" parent="UI/UiContainer"]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("11_ylhto")

[node name="GameInfo" type="HBoxContainer" parent="UI/UiContainer"]
custom_minimum_size = Vector2(600, 500)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -450.0
offset_top = -325.0
offset_right = 450.0
offset_bottom = 325.0
grow_horizontal = 2
grow_vertical = 2
theme = SubResource("Theme_ylhto")

[node name="Leaderboard" type="PanelContainer" parent="UI/UiContainer/GameInfo"]
z_index = 5
custom_minimum_size = Vector2(900, 500)
layout_mode = 2
theme_override_styles/panel = ExtResource("5_cwolq")
script = ExtResource("5_l271a")

[node name="M" type="MarginContainer" parent="UI/UiContainer/GameInfo/Leaderboard"]
layout_mode = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 5
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="V" type="VBoxContainer" parent="UI/UiContainer/GameInfo/Leaderboard/M"]
layout_mode = 2

[node name="MapName" type="Label" parent="UI/UiContainer/GameInfo/Leaderboard/M/V"]
layout_mode = 2
text = "Current Map: Unknown"

[node name="MedalInfo" type="GridContainer" parent="UI/UiContainer/GameInfo/Leaderboard/M/V"]
layout_mode = 2
columns = 5

[node name="Bronze" type="TextureRect" parent="UI/UiContainer/GameInfo/Leaderboard/M/V/MedalInfo"]
custom_minimum_size = Vector2(0, 175)
layout_mode = 2
size_flags_horizontal = 3
texture = ExtResource("5_5f2sf")

[node name="Silver" type="TextureRect" parent="UI/UiContainer/GameInfo/Leaderboard/M/V/MedalInfo"]
custom_minimum_size = Vector2(0, 175)
layout_mode = 2
size_flags_horizontal = 3
texture = ExtResource("6_x42xx")

[node name="Gold" type="TextureRect" parent="UI/UiContainer/GameInfo/Leaderboard/M/V/MedalInfo"]
custom_minimum_size = Vector2(0, 175)
layout_mode = 2
size_flags_horizontal = 3
texture = ExtResource("7_l271a")

[node name="Plat" type="TextureRect" parent="UI/UiContainer/GameInfo/Leaderboard/M/V/MedalInfo"]
custom_minimum_size = Vector2(0, 175)
layout_mode = 2
size_flags_horizontal = 3
texture = ExtResource("9_8ydov")

[node name="Author" type="TextureRect" parent="UI/UiContainer/GameInfo/Leaderboard/M/V/MedalInfo"]
custom_minimum_size = Vector2(0, 175)
layout_mode = 2
size_flags_horizontal = 3
texture = ExtResource("8_8ydov")

[node name="BronzeTime" type="Label" parent="UI/UiContainer/GameInfo/Leaderboard/M/V/MedalInfo"]
layout_mode = 2
text = "0.0s"
horizontal_alignment = 1

[node name="SilverTime" type="Label" parent="UI/UiContainer/GameInfo/Leaderboard/M/V/MedalInfo"]
layout_mode = 2
text = "0.0s"
horizontal_alignment = 1

[node name="GoldTime" type="Label" parent="UI/UiContainer/GameInfo/Leaderboard/M/V/MedalInfo"]
layout_mode = 2
text = "0.0s"
horizontal_alignment = 1

[node name="PlatTime" type="Label" parent="UI/UiContainer/GameInfo/Leaderboard/M/V/MedalInfo"]
layout_mode = 2
text = "0.0s"
horizontal_alignment = 1

[node name="AuthorTime" type="Label" parent="UI/UiContainer/GameInfo/Leaderboard/M/V/MedalInfo"]
layout_mode = 2
text = "0.0s"
horizontal_alignment = 1

[node name="LeaderboardTitle" type="Label" parent="UI/UiContainer/GameInfo/Leaderboard/M/V"]
layout_mode = 2
text = "Leaderboard"

[node name="TH" type="GridContainer" parent="UI/UiContainer/GameInfo/Leaderboard/M/V"]
layout_mode = 2
theme_override_constants/h_separation = 30
columns = 6

[node name="Pos" type="Label" parent="UI/UiContainer/GameInfo/Leaderboard/M/V/TH"]
custom_minimum_size = Vector2(30, 0)
layout_mode = 2
text = "Pos"

[node name="Name" type="Label" parent="UI/UiContainer/GameInfo/Leaderboard/M/V/TH"]
layout_mode = 2
size_flags_horizontal = 3
text = "Player Name"

[node name="Time" type="Label" parent="UI/UiContainer/GameInfo/Leaderboard/M/V/TH"]
layout_mode = 2
size_flags_horizontal = 3
text = "Time (s)"

[node name="DateSubmitted" type="Label" parent="UI/UiContainer/GameInfo/Leaderboard/M/V/TH"]
layout_mode = 2
size_flags_horizontal = 3
text = "Date Submitted"

[node name="RaceGhost" type="Label" parent="UI/UiContainer/GameInfo/Leaderboard/M/V/TH"]
layout_mode = 2
size_flags_horizontal = 3
text = "Race Ghost"

[node name="RaceGhost2" type="Label" parent="UI/UiContainer/GameInfo/Leaderboard/M/V/TH"]
layout_mode = 2
size_flags_horizontal = 3
text = "View Replay"

[node name="TRows" type="GridContainer" parent="UI/UiContainer/GameInfo/Leaderboard/M/V"]
layout_mode = 2
theme = SubResource("Theme_wlj80")
theme_override_constants/h_separation = 30
theme_override_constants/v_separation = 4
columns = 6

[node name="H" type="HBoxContainer" parent="UI/UiContainer/GameInfo/Leaderboard/M/V"]
layout_mode = 2

[node name="<" type="Button" parent="UI/UiContainer/GameInfo/Leaderboard/M/V/H"]
layout_mode = 2
focus_mode = 0
text = "<"

[node name="Page" type="Label" parent="UI/UiContainer/GameInfo/Leaderboard/M/V/H"]
layout_mode = 2
text = "Page 0 of 0"

[node name=">" type="Button" parent="UI/UiContainer/GameInfo/Leaderboard/M/V/H"]
layout_mode = 2
focus_mode = 0
text = ">"

[node name="SetStartPosition" type="Button" parent="UI/UiContainer/GameInfo/Leaderboard/M/V"]
layout_mode = 2
size_flags_vertical = 10
focus_mode = 0
text = "Set Start Position"

[node name="ReplayLastRun" type="Button" parent="UI/UiContainer/GameInfo/Leaderboard/M/V"]
layout_mode = 2
size_flags_vertical = 8
focus_mode = 0
text = "Replay Last Run"

[node name="Admin" type="PanelContainer" parent="UI/UiContainer/GameInfo"]
visible = false
custom_minimum_size = Vector2(400, 100)
layout_mode = 2
theme_override_styles/panel = ExtResource("5_cwolq")

[node name="M" type="MarginContainer" parent="UI/UiContainer/GameInfo/Admin"]
layout_mode = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 5
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 5

[node name="V" type="VBoxContainer" parent="UI/UiContainer/GameInfo/Admin/M"]
layout_mode = 2

[node name="Title" type="Label" parent="UI/UiContainer/GameInfo/Admin/M/V"]
layout_mode = 2
text = "Admin - Click any player's name to view details."

[node name="V" type="VBoxContainer" parent="UI/UiContainer/GameInfo/Admin/M/V"]
layout_mode = 2

[node name="Name" type="Label3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.30343, 0)
billboard = 2
text = "Unnamed Player"

[node name="CameraAnchor" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.85, 0)

[editable path="Eye/Camera/WeaponHandler/Arms"]
